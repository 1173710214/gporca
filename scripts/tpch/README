The load-data.sh loads the TPCH data in a database called 'test'.

To create the tables and copy the data in, run load-data.sh from the same location as the data files (.tbl), e.g.:

examples/tpch $ sh load-data.sh

By default, the script creates distributed tables.
To create the tables as master-only tables, supply '-m' to the script:

examples/tpch $ sh load-data.sh -m

To change the default database name, modify the DBNAME variable in load-data.sh.


To run the TPCH queries, execute the following script from the examples/tpch directory:

examples/tpch $ sh run-queries.sh

It will run the TPCH query suite both through normal GPDB execution, as well as
through plan freezing and restoring and will print two tables in the end which summarize the
results from the execution, for example:


result |     id      |        gpdb        |                                                 dxl                                                  
--------+-------------+--------------------+------------------------------------------------------------------------------------------------------
 OK     | query01.sql | processed 4 rows   | processed 4 rows
 FAILED | query02.sql | processed 3 rows   | ERROR,"Expression type: {RELABELTYPE :arg {VAR :varno 5 :varattno 5 :vartype 1043 :vartypmod 29 :var
 OK     | query03.sql | processed 10 rows  | processed 10 rows
 FAILED | query04.sql | processed 5 rows   | ERROR,"CPlStmtTranslator.cpp:1684: Failed assertion: 0 < pvar->varattno                              
                                           : Stack trace:                                                                                         
                                           : 0    0x00000000
 OK     | query05.sql | processed 5 rows   | processed 5 rows
 OK     | query06.sql | processed 1 rows   | processed 1 rows
 OK     | query07.sql | processed 4 rows   | processed 4 rows
 FAILED | query08.sql | processed 2 rows   | ERROR,"Expression type: {RELABELTYPE :arg {VAR :varno 3 :varattno 5 :vartype 1043 :vartypmod 29 :var
 FAILED | query09.sql | processed 172 rows | ERROR,"Expression type: {RELABELTYPE :arg {VAR :varno 3 :varattno 2 :vartype 1043 :vartypmod 59 :var
 OK     | query10.sql | processed 20 rows  | processed 20 rows
 FAILED | query11.sql | processed 357 rows | ERROR,"Expression type: {PARAM :paramkind 1 :paramid 0 :paramtype 1700} not supported",              
                                           : 
 OK     | query12.sql | processed 2 rows   | processed 2 rows
 FAILED | query13.sql | processed 32 rows  | ERROR,"Expression type: {SUBQUERYSCAN :plan_node_id 6 :plan_parent_node_id 5 :startup_cost 1080.31 :
 FAILED | query14.sql | processed 1 rows   | ERROR,"Expression type: {RELABELTYPE :arg {VAR :varno 0 :varattno 1 :vartype 1043 :vartypmod 29 :var
 FAILED | query16.sql | processed 284 rows | ERROR,"Expression type: {RELABELTYPE :arg {VAR :varno 2 :varattno 5 :vartype 1043 :vartypmod 29 :var
 OK     | query17.sql | processed 1 rows   | processed 1 rows
 OK     | query18.sql | processed 0 rows   | processed 0 rows
 FAILED | query19.sql | processed 1 rows   | ERROR,"CPlStmtTranslator.cpp:1250: Failed assertion: 2 == list_length(pboolexpr->args)               
                                           : Stack trace:                                                                                         
                                           : 
 FAILED | query20.sql | processed 0 rows   | ERROR,"Expression type: {RESULT :plan_node_id 4 :plan_parent_node_id 3 :startup_cost 1364.15 :total_
 FAILED | query21.sql | processed 7 rows   | ERROR,"Expression type: {NULLTEST :arg {VAR :varno 6 :varattno 1 :vartype 23 :vartypmod -1 :varlevel
 FAILED | query22.sql | processed 7 rows   | ERROR,"CPlStmtTranslator.cpp:1250: Failed assertion: 2 == list_length(pboolexpr->args)               
                                           : Stack trace:                                                                                         
                                           : 
(21 rows)

 result | cnt 
--------+-----
 OK     |   9
 FAILED |  12
(2 rows)
